{{>userNav}}

{{>profileLayout}}

<div class="info-section text-dark 
             p-3 mt-5">
    <h2 class=" pb-3 ">Referral Information</h2>
    <div class="d-flex">



        <div class=" p-sm-1 p-lg-5    rounded-4  m-2 d-inline-block   shadow align-content-center text-center ">
            <h4><i class="fa-solid fa-share-nodes"></i> Total Referral</h4>
            <h4 class="pt-2 pb-2 text-success " id="balance">{{walletData.balance}}</h4>

        </div>
        <div class="mt-auto mb-auto border-1 shadow  p-3  rounded-4  m-2 d-inline-block ">
            <span class="text-success">Your Reffrel Link : <h6 class="pt-2 pb-2" id="link">  {{referralLink}}{{personalInfo._id}}</h6></span>
            <p>You will Get RS100 in your wallet  for each referal </p>
            <p class="text-danger" id="error"></p>
            <button id="copyButton" class="btn btn-primary me-5   mt-1    "><i class="fa-solid fa-clipboard"></i> Copy Your Reffral Link</button>
        </div>

    </div>

    <div class="accordion mt-4 " id="accordionPanelsStayOpenExample">
        <div class="accordion-item">
            <h2 class="accordion-header">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                    data-bs-target="#panelsStayOpen-collapseOne" aria-expanded="false"
                    aria-controls="panelsStayOpen-collapseOne">
                    Reffral Status
                </button>
            </h2>
            <div id="panelsStayOpen-collapseOne" class="accordion-collapse collapse" style="">
                <div class="accordion-body">
                    <table class="table">
                        <tbody>
                            {{#each refrralHistory.history}}
                            <tr>
                                <th>Your referal to <span class="text-success">{{this.name}}</span> success </th>
                                <td>{{this.date}}</td>
                                <td>{{this.Amount}}</td>
                            </tr>
                            {{/each}}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
</div>
</div>
{{>userFooter}}


<script>
    document.addEventListener('DOMContentLoaded', function () {
        
        document.getElementById('copyButton').addEventListener('click', function () {
        
        const copyText = document.getElementById("link").innerText

        console.log(copyText)

       // copyText.select();
        //copyText.setSelectionRange(0, 99999);
        navigator.clipboard.writeText(copyText);

        document.getElementById('error').innerHTML = "Link Copied"

    })


    })
    
</script>