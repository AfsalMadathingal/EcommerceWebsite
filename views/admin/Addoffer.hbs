<link rel="stylesheet" href="/css/table-user.css">
<link rel="stylesheet" href="/css/addproducts.css">
<script src="https://code.jquery.com/jquery-3.7.1.js" integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4="
    crossorigin="anonymous"></script>

{{!--
<script defer src="https://cdn.crop.guide/loader/l.js?c=JVJTZH"></script> --}}
<script defer src="https://cdn.crop.guide/loader/l.js?c=TJCFHV"></script>


<div class="details-section p-3 ">

    <div class=" shadow rounded-5  input-add-pro p-5 bg-white  bg-opacity-75">


        <form method="post" class="form-add-product" action="/admin/createoffer" enctype="multipart/form-data"
            >

            <div class="row g-3 p-3 ">
                <div class="col-md-6">
                    <!-- Left side -->
                    <label class="form-label" for="productName">Offer Title</label>
                    <input type="text" name="OfferTitle" placeholder="enter Offer Title" class="form-control"
                        id="recipient-name">
                    <h6 class="alertAddProduct" id="productNameAlert"></h6>

                    <label class="form-label" for="category">Category</label>
                    <select name="category" id="category" class="form-select">
                        {{#each category}}
                        <option value="{{this.category}}">{{this.category}}</option>
                        {{/each}}
                    </select>

                    <label for="recipient-name" class="col-form-label">Start Date</label>
                    <input type="date" name="startDate" placeholder="enter Expire Date" class="form-control"
                        id="recipient-name">
                         <label for="recipient-name" class="col-form-label">End Date</label>
                    <input type="date" name="endDate" placeholder="enter Expire Date" class="form-control"
                        id="recipient-name">

                    <div class="mb-3">
                        <label class="form-label">Discount Type</label>
                        <div class="form-check">

                            <input class="form-check-input" type="radio" name="discountType" id="editdiscountPercentage"
                                value="percentage" checked>
                            <label class="form-check-label" for="discountPercentage">
                                Discount Percentage
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="discountType" id="editdiscountAmount"
                                value="amount">
                            <label class="form-check-label" for="discountAmount">
                                Discount Amount
                            </label>
                        </div>
                    </div>
                    <h6 class="alertAddProduct" id="qtyAlert"></h6>

                     <label for="recipient-name" class="col-form-label">Discount Value</label>
                            <input type="text" name="discountValue" placeholder="enter Discount Value" class="form-control"
                                id="recipient-name">

                    
                </div>

                <div class="col-md-6">
                    <h5>Chose image for poster</h5>
                    <div class="form">
                        <div class="grid">
                            <div class="form-element">
                                <input type="file" id="file-1" name="images" accept="image/*">
                                <label for="file-1" id="file-1-preview">
                                    <img src="https://bit.ly/3ubuq5o" alt="">
                                    <div>
                                        <span>+</span>
                                    </div>
                                </label>
                            </div>
                        </div>
                    </div>
                    <h6 id="imgAlert"></h6>
                    <label class="form-label" for="aboutProduct"> Offers details</label>
                    <textarea class="form-control" placeholder="Enter a detailed description..." name="offerDetails"
                        id="longdescription" rows="4"></textarea>
                    <h6 class="alertAddProduct" id="longAlert"></h6>
                </div>

            </div>
            <div class="col-12">
                <div class="button-create-cancel">
                    <button type="submit" class="btn btn-primary">Create</button>
                    <a class="btn btn-danger" href="/admin/offers">Cancel</a>
                </div>
            </div>

        </form>
    </div>

</div>
</div>

<script>

    function Validation() {

        var fileInput = document.getElementById('file-1');
        var previewImage = document.getElementById('file-1-preview').querySelector('img');

        let productName = document.getElementById("productName").value;

        let longdescription = document.getElementById("longdescription").value;
        let Qty = document.getElementById("Qty").value;
        let price = document.getElementById("price").value;
        let cost = document.getElementById("cost").value;
        let Barcode = document.getElementById("Barcode").value;
        let ProductId = document.getElementById("ProductId").value;

        let productNameRegex = /^\s*.*\S.*\s*$/;
        let number = /^[1-9]\d*$/;
        let descriptionRegex = /^(?!\s*$)[\s\S]{1,}$/


        let productNameAlert = document.getElementById("productNameAlert");
        let qtyAlert = document.getElementById("qtyAlert");
        let priceAlert = document.getElementById("priceAlert");
        let costAlert = document.getElementById("costAlert");
        let BarcodeAlert = document.getElementById("BarcodeAlert");
        let ProductIdAlert = document.getElementById("ProductIdAlert");
        let longAlert = document.getElementById("longAlert");
        let imgAlert = document.getElementById('imgAlert')

        if (!productName.match(productNameRegex)) {
            productNameAlert.innerHTML = "Name Not Valid";
            return false;
        } else if (!Qty.match(number)) {
            qtyAlert.innerHTML = "Please Check Qty Again";
            return false;
        } else if (!price.match(number)) {
            priceAlert.innerHTML = "Please Check Price Again";
            return false;
        } else if (!cost.match(number)) {
            costAlert.innerHTML = "Please Check Cost Again";
            return false;
        } else if (!Barcode.match(number)) {
            BarcodeAlert.innerHTML = "Please Check Barcode Again";
            return false;
        } else if (!ProductId.match(number)) {
            ProductIdAlert.innerHTML = "Please Check Id Again";
            return false;
        }
        else if (!longdescription.match(descriptionRegex)) {
            longAlert.innerHTML = "Please Check about Again";
            return false;
        } else if (fileInput.files.length < 0) {
            imgAlert.innerHTML = "Please chose image"
            return false;
        }

        else {
            return true;
        }

    }

    function previewBeforeUpload(id) {
        document.querySelector("#" + id).addEventListener("change", function (e) {
            if (e.target.files.length == 0) {
                return;
            }
            let file = e.target.files[0];
            let url = URL.createObjectURL(file);
            document.querySelector("#" + id + "-preview div").innerText = file.name;
            document.querySelector("#" + id + "-preview img").src = url;
        });
    }

    previewBeforeUpload("file-1");
    previewBeforeUpload("file-2");
    previewBeforeUpload("file-3");










</script>

<style>
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }

    body {
        font-family: "Raleway", sans-serif;
        background: #f8f8f8;
    }

    .form {
        margin: 40px 0 20px;
        /* Reduced top margin */
        padding: 20px;
        /* Reduced padding */
        display: flex;
        /* Added flex property */
        justify-content: center;
        /* Center content horizontally */
        align-items: center;
        /* Center content vertically */
        flex-direction: column;
        /* Stack children vertically */
        width: 500px;
    }

    .form h5 {
        text-align: center;
        color: #acacac;
        font-size: 24px;
        font-weight: 400;
    }

    .form .grid {
        margin-top: 20px;
        /* Reduced top margin */
        display: flex;
        align-items: center;
        gap: 10px;
        /* Reduced gap */
        height: auto;
        /* Allow the container to adjust its height based on content */
    }

    .form .grid .form-element {
        width: 160px;
        /* Reduced width */
        height: 160px;
        /* Reduced height */
        box-shadow: 0 0 15px 3px rgba(100, 100, 100, 0.1);
    }

    .form .grid .form-element input {
        display: none;
    }

    .form .grid .form-element img {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }

    .form .grid .form-element div {
        position: relative;
        height: 30px;
        /* Reduced height */
        margin-top: -30px;
        /* Adjusted margin */
        background: rgba(0, 0, 0, 0.5);
        text-align: center;
        line-height: 30px;
        /* Reduced line-height */
        font-size: 12px;
        /* Reduced font-size */
        color: #f5f5f5;
        font-weight: 600;
    }

    .form .grid .form-element div span {
        font-size: 24px;
        /* Reduced font-size */
    }
</style>